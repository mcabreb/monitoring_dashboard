# Story 1.4: Help Overlay

## Status

Draft

## Story

**As a** user,
**I want** to press ? to see all available keyboard shortcuts,
**so that** I can learn how to use the dashboard effectively.

## Acceptance Criteria

1. Pressing ? displays a centered overlay/modal showing all keyboard shortcuts
2. Overlay lists: Tab (next panel), Shift+Tab (prev panel), Enter (expand), Escape (back), ? (help), q (quit)
3. Overlay has GEM-style bordered appearance
4. Pressing any key dismisses the overlay and returns to dashboard
5. Overlay is semi-transparent or clearly overlaid on the dashboard content

## Tasks / Subtasks

- [ ] Create HelpOverlay screen (AC: 1, 2, 3)
  - [ ] Create src/monitor_dashboard/screens/help.py
  - [ ] Create HelpOverlay class extending ModalScreen
  - [ ] Implement compose() with keyboard shortcut list
  - [ ] Style with GEM-aesthetic border
- [ ] Add keyboard shortcut content (AC: 2)
  - [ ] Create formatted table/list of shortcuts
  - [ ] Include: Tab, Shift+Tab, Enter, Escape, ?, q
  - [ ] Add brief description for each shortcut
  - [ ] Center content in overlay
- [ ] Style the overlay (AC: 3, 5)
  - [ ] Add styles to app.tcss for HelpOverlay
  - [ ] Semi-transparent or dimmed background
  - [ ] Clean bordered box in center
  - [ ] Match GEM aesthetic
- [ ] Implement show/dismiss behavior (AC: 1, 4)
  - [ ] Add ? binding to MonitorDashboardApp
  - [ ] Create action_show_help() to push HelpOverlay
  - [ ] Dismiss on ANY key press (not just specific keys)
  - [ ] Return focus to previous panel after dismiss

## Dev Notes

**Help Overlay Content:**
```
┌──────────────────────────────────────┐
│            Keyboard Help             │
├──────────────────────────────────────┤
│                                      │
│  Tab          Next panel             │
│  Shift+Tab    Previous panel         │
│  Enter        Expand/collapse panel  │
│  Escape       Return to dashboard    │
│  ?            Show this help         │
│  q            Quit application       │
│                                      │
│  Press any key to close              │
│                                      │
└──────────────────────────────────────┘
```

**ModalScreen Pattern:**
```python
from textual.screen import ModalScreen
from textual.widgets import Static
from textual.containers import Container

class HelpOverlay(ModalScreen):
    """Modal help screen showing keyboard shortcuts."""

    BINDINGS = [
        Binding("any", "dismiss", show=False),
    ]

    def compose(self):
        yield Container(
            Static(HELP_TEXT),
            id="help-content"
        )

    def on_key(self, event):
        """Dismiss on any key press."""
        self.dismiss()
```

**CSS for Overlay:**
```css
HelpOverlay {
    align: center middle;
}

#help-content {
    width: 40;
    height: auto;
    border: solid white;
    background: $surface;
    padding: 1 2;
}
```

**GEM Aesthetic:**
- Clean solid border (not double)
- Monochrome colors
- Centered both horizontally and vertically
- Content should be readable against dimmed background

### Testing

**Test Location:** tests/integration/

**Testing Standards:**
- Framework: pytest with textual pilot API
- Run with: `pytest tests/integration/test_app.py`

**Test Cases:**
```python
async def test_question_mark_shows_help():
    async with app.run_test() as pilot:
        await pilot.press("?")
        assert isinstance(app.screen, HelpOverlay)

async def test_any_key_dismisses_help():
    async with app.run_test() as pilot:
        await pilot.press("?")
        await pilot.press("x")  # Any key
        assert not isinstance(app.screen, HelpOverlay)
```

**Manual Verification:**
- Press ? and confirm overlay appears centered
- Verify all shortcuts are listed
- Press any key and confirm overlay dismisses
- Confirm focus returns to previous panel

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-17 | 0.1 | Initial story creation | Sarah (PO) |

---

## Dev Agent Record

### Agent Model Used

_To be filled by dev agent_

### Debug Log References

_To be filled by dev agent_

### Completion Notes List

_To be filled by dev agent_

### File List

_To be filled by dev agent_

---

## QA Results

_To be filled by QA agent_
